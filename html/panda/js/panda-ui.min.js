(function(d){function g(m,l,k){for(var j in l.types){m.removeClass(l.types[j])}m.addClass(l.types[k])}function c(k,j,i,l){if(l&&k.label){i=l+k.label+i}if(k.escape){i=i.escapeHtml()}return d("<li>").addClass(k.texts[j]).append(d("<i>").addClass(k.icons[j])).append(d("<span>").html(i))}function a(l,k,i,j){l.append(d("<ul>").addClass(k.css).append(c(k,j,i)));g(l,k,j)}function h(q,p,j,o){if(j){var r=d("<ul>").addClass(p.css);if(d.isArray(j)){for(var l=0;l<j.length;l++){r.append(c(p,o,j[l]))}}else{for(var u in j){var k=j[u];if(d.isArray(k)){for(var l=0;l<k.length;l++){r.append(c(p,o,k[l],u))}}else{r.append(c(p,o,k,u))}}}q.append(r);g(q,p,o)}}function b(j,w,l,u){if(l){for(var k in l){var r=j.find('input[name="'+k+'"]');if(r.length){r.closest(".form-group").addClass("has-error").find(".p-field-errors").remove();var o=d("<ul>").attr("errorfor",k).addClass(w.css).addClass("p-field-errors");var q=l[k];if(d.isArray(q)){for(var p=0;p<q.length;p++){o.append(c(w,u,q[p],k))}}else{o.append(c(w,u,q,k))}o.insertAfter(r)}}}}function f(p,o,j,l){if(typeof(j)=="string"){a(p,o,j,l||"info")}else{if(d.isArray(j)){for(var k=0;k<j.length;k++){if(typeof(j[k])=="string"){a(p,o,j[k],l||"info")}else{a(p,o,j[k].html,j[k].type)}}}else{if(j){if(j.params){if(l){b(d(l),o,j.params.errors,"error")}else{h(p,o,j.params.errors,"error")}}if(j.action){h(p,o,j.action.errors,"error");h(p,o,j.action.warnings,"warn");h(p,o,j.action.confirms,"help");h(p,o,j.action.messages,"info")}}}}}d.palert={css:"fa-ul",label:false,escape:true,icons:{down:"fa-caret-down",up:"fa-caret-up",info:"fa-li fa fa-info-circle",help:"fa-li fa fa-question-circle",warn:"fa-li fa fa-exclamation-triangle",error:"fa-li fa fa-exclamation-circle"},texts:{info:"text-success",help:"text-warning",warn:"text-warning",error:"text-danger"},types:{info:"alert-success",help:"alert-info",warn:"alert-warning",error:"alert-danger"}};var e=function(j,i){if(i){j.data("palert",i)}return{clear:function(){j.children(".alert").remove();return this},error:function(k){return this.add(k,"error")},warn:function(k){return this.add(k,"warn")},help:function(k){return this.add(k,"help")},info:function(k){return this.add(k,"info")},add:function(k,o){var p=d.extend({},j.data("palert"),d.palert);var l=false,q=j.children(".p-alert");if(q.size()<1){q=d("<div></div>").addClass("p-alert alert alert-dismissable fade in").css("display","none");l=true}f(q,p,k,o);if(l&&q.children().length){q.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>');j.prepend(q);q.slideDown()}return this},actionAlert:function(p,l){if(p.alerts){this.add(p.alerts,l);if(p.alerts.params&&!p.alerts.params.empty){this.error(d(l).data("ajaxInputError"))}}if(p.exception){var o=p.exception;var k=o.message+(o.stackTrace?("\n"+o.stackTrace):"");this.add(k,"error")}return this},ajaxJsonError:function(t,l,q,k){if(t&&t.responseJSON){var s=t.responseJSON;if(s&&(s.alerts||s.exception)){return this.actionAlert(s)}}msg="";if(q){msg+=q+"\n"}if(t&&t.responseText){try{var p=JSON.parse(t.responseText);msg+=JSON.stringify(p,null,2)}catch(o){msg+=t.responseText}}return this.add(msg||k,"error")}}};d.fn.palert=function(j){var k=typeof j==="object"&&j;var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var l=e(d(this),k);if(typeof j==="string"){l[j].apply(l,i)}})};d.palert.notify=function(i,j,l){l=d.extend({},d.palert,l);var k=d.extend({style:"palert"},d.palert.notifys);var o=d("<div>").addClass("p-alert alert");f(o,l,i,j);if(d.notify){if(!d.notify.getStyle("palert")){d.notify.addStyle("palert",{html:'<div data-notify-html="html"></div>'})}d.notify({html:o},k)}};d.palert.toggleFieldErrors=function(j){var l=d(j).closest(".p-field-errors-alert").next(".p-field-errors");var k=d.palert.icons.down;var i=d.palert.icons.up;if(l.is(":hidden")){l.slideDown();d(j).children("i").removeClass(k).addClass(i)}else{l.slideUp();d(j).children("i").removeClass(i).addClass(k)}return false}})(jQuery);(function(b){var a=function(c){c.hammer().on("swipeleft",function(d){b(this).data("bs.carousel").next();d.gesture.stopDetect()}).on("swiperight",function(d){b(this).data("bs.carousel").prev();d.gesture.stopDetect()})};b(window).on("load",function(){if(typeof(b.fn.hammer)=="function"){b('[data-ride="carousel"]').each(function(){a(b(this))})}})})(jQuery);(function(a){a(window).on("load",function(){a(".p-checkboxlist.order").removeClass("order").addClass("ordered").find(":checkbox").click(function(){var d=a(this);var c=d.closest("label");var b=d.closest(".p-checkboxlist").find("hr");c.fadeOut(function(){if(d.is(":checked")){c.insertBefore(b)}else{c.insertAfter(b)}c.fadeIn()})})})})(jQuery);(function(d){var c={};var b="div.p-datepicker, div.p-datetimepicker, div.p-timepicker";function a(){if(typeof(d.fn.datetimepicker)=="undefined"){setTimeout(a,100);return}for(var e in c){if(!d.fn.datetimepicker.dates[e]){setTimeout(a,100);return}}d(b).datetimepicker()}d(window).on("load",function(){var f=d(b);if(f.size()){var e=f.data("datetimepickerCss");if(e){d.jcss(e)}var g=f.data("datetimepickerJs");if(g){d.jscript(g,function(){f.each(function(){var j=d(this).data("language");var h=d(this).data("datetimepickerLangJs");if(j&&h&&!c[j]){d.jscript(h);c[j]=h}})})}a()}})})(jQuery);if(typeof(panda)=="undefined"){panda={}}(function(g){function b(){var i=g(this);var j=g("#"+i.attr("id")+"_alert").empty();i.find(".has-error").removeClass("has-error").end().find(".p-field-errors").remove();if(!i.isLoadMasked()){i.loadmask()}g.ajax({url:i.data("ajaxAction"),method:"post",data:i.serializeArray(),dataType:"json",success:function(k){j.palert("actionAlert",k,i);if(k.result){i.vals(k.result);i.find("div.p-datepicker, div.p-datetimepicker, div.p-timepicker").each(function(){var l=g(this).find("input").val();if(l){g(this).datetimepicker("setValue",new Date(l))}})}if(j.children().length){j.scrollIntoView()}},error:function(m,k,l){j.palert("ajaxJsonAlert",m,k,l,i.data("ajaxServerError"))},complete:function(){i.unloadmask()}});return false}function c(i){if(!i.data("ajaxSubmitHooked")&&i.data("ajaxAction")){i.data("ajaxSubmitHooked",true).submit(b)}}function h(i){var j=i.closest(".p-popup, .p-inner");var k=i.serializeArray();if(j.hasClass("p-inner")){k.push({name:"__inner",value:"true"})}else{k.push({name:"__popup",value:"true"})}if(i.attr("loadmask")!="false"){j.parent().loadmask()}g.ajax({url:i.attr("action"),data:k,dataType:"html",success:function(l,m,o){j.parent().html(l)},error:function(o,m,l){j.parent().html(o.responseText)},complete:function(m,l){j.parent().unloadmask()}})}function e(i){if(!i.data("actionHooked")){i.data("actionHooked",true).find("input[data-action], button[data-action]").click(function(){g(this).closest("form").attr("action",g(this).data("action"))})}}function a(i){var j=i.attr("target")||"_self";return j=="_self"||j=="_top"||j=="_parent"}function d(i){if(i.data("hooked")){return}var j=i.closest(".p-popup, .p-inner");if(j.length>0){i.data("hooked",true);i.submit(function(k){k.preventDefault();h(g(this));return false})}}function f(i){if(i.data("hooked")){return}if(i.height()>20&&i.attr("loadmask")!="false"){i.data("hooked",true);i.submit(function(){g(this).loadmask()})}}g(window).on("load",function(){g("form").each(function(){var i=g(this);e(i);if(a(i)){d(i);if(panda.enable_loadmask_form){f(i)}c(i)}})})})(jQuery);(function(b){var a={};function d(){b.extend(b.summernote.plugins,{media:function(f){var h=b.summernote.ui;var g=f.$note;f.memo("button.media",function(){function j(k){b.popup().hide();if(k){for(var l=0;l<k.length;l++){g.summernote("insertImage",k[l].href,k[l].name)}}}var i=h.button({contents:'<i class="'+(g.data("mediaIcon")||"fa fa-list-alt")+'"/>',tooltip:g.data("mediaText")||"Media Browser",click:function(){var k=g.data("mediaHref");var l=g.data("mediaPopupId");if(!l){l=(g.attr("id")||g.attr("name")||k.hashCode())+"_media_popup"}b.popup({id:l,url:k}).show({id:l,trigger:this,popover:true,onpopup:null,onhide:null,callback:j})}});return i.render()});this.destroy=function(){this.$panel.remove();this.$panel=null}}})}function c(){if(typeof(b.fn.summernote)=="undefined"){setTimeout(c,100);return}for(var f in a){if(!b.summernote.lang[f]){setTimeout(c,100);return}}d();b("textarea.p-htmleditor.p-summernote").each(function(){var s=b(this);var r={};var q=["toolbar","popover","fontNames","fontNamesIgnoreCheck"];for(var k=0;k<q.length;k++){var h=s.attr(q[k]);if(h){try{r[q[k]]=JSON.parse(h)}catch(m){}}}b.extend(r,s.data("summernoteOptions"));var g=s.data("summernoteLang");if(g){r.lang=g}if(s.attr("readonly")){s.parent().addClass("p-htmleditor-readonly");s.summernote(b.extend(r,{toolbar:false})).summernote("disable")}else{var j=["picture","video"];if(s.data("mediaHref")){j.push("media")}s.summernote(b.extend({height:s.attr("height"),followingToolbar:s.attr("followingToolbar")||false,toolbar:[["style",["style","fontname","fontsize","color"]],["text",["bold","italic","underline","strikethrough","superscript","subscript"]],["para",["paragraph","ol","ul"]],["insert",["hr","table","link"]],["media",j],["edit",["undo","redo","clear"]],["misc",["codeview","fullscreen","help"]],]},r))}})}function e(){if(typeof(b.fn.cleditor)=="undefined"){setTimeout(e,100);return}b("textarea.p-htmleditor.p-cleditor").cleditor()}b(window).on("load",function(){var i=b("textarea.p-htmleditor.p-summernote");if(i.size()){var g=i.data("summernoteCss");if(g){b.jcss(g)}var h=i.data("summernoteJs");if(h){b.jscript(h,function(){i.each(function(){var k=b(this).data("summernoteLang");var j=b(this).data("summernoteLangJs");if(k&&j&&!a[k]){b.jscript(j);a[k]=j}})})}c()}var f=b("textarea.p-htmleditor.p-cleditor");if(f.size()){var g=f.data("cleditorCss");if(g){b.jcss(g)}var h=f.data("cleditorJs");if(h){b.jscript(h,true)}e()}})})(jQuery);if(typeof(panda)=="undefined"){panda={}}panda.loading=function(a){$("body").loadmask({mask:false,fixed:true,timeout:a||1000})};panda.page_sort=function(b,a){panda.loading();location.href=$.addQueryParams(location.href,{"s.c":b,"s.d":a});return false};panda.page_sort_reverse=function(b,a){return panda.page_sort(b,a.toLowerCase()=="asc"?"desc":"asc")};panda.page_goto=function(a){panda.loading();location.href=$.addQueryParams(location.href,{"p.s":a});return false};panda.page_limit=function(a){panda.loading();location.href=$.addQueryParams(location.href,{"p.l":a});return false};function plv_options(d,a){var c=document.getElementById(d);for(var b in a){c[b]=a[b]}}function plv_getForm(a){return document.getElementById(a+"_form")}function plv_getBForm(a){return document.getElementById(a+"_bform")}function plv_submitBForm(e,c,d,a){$("#"+e).loadmask();var b=plv_getBForm(e);if(c){if(typeof(c)=="string"){b.action=c}else{if(!d){d=c}}}if(d){for(n in d){$('<input type="hidden" name="'+n+'"/>').val(d[n]).appendTo(b)}}b.target=a?a:"";b.submit();return false}function plv_submitCheckedRows(d,b,c,a){if(plv_enableCheckedValues(d)>0){plv_submitBForm(d,b,c,a)}return false}function plv_submitCheckedKeys(d,b,c,a){if(plv_enableCheckedKeys(d)>0){plv_submitBForm(d,b,c,a)}return false}function plv_enableCheckedValues(c,a){var b=0;$("#"+c+" .p-lv-tbody input.p-lv-cb").each(function(){if(this.checked){b++;if(a){$(this).closest("tr").find("input.p-lv-cv").each(function(){var d=_plv_getPropertyName(this.name);if(a==d||a.contains(d)){this.disabled=false}})}else{$(this).closest("tr").find("input.p-lv-cv").prop("disabled",false)}}else{$(this).closest("tr").find("input.p-lv-cv").prop("disabled",true)}});return b}function plv_enableCheckedKeys(b){var a=0;$("#"+b+" .p-lv-tbody input.p-lv-cb").each(function(){if(this.checked){a++}$(this).closest("tr").find("input.p-lv-ck").prop("disabled",!this.checked)});return a}function plv_getRowData(a){var b={};$(a).find("input.p-lv-cv").each(function(){var c=_plv_getPropertyName(this.name);b[c]=this.value});return b}function _plv_getPropertyName(b){var a=b.lastIndexOf(".");if(a>=0){b=b.substring(a+1)}return b}function plv_getTBodyRows(a){return $("#"+a+" .p-lv-tbody > tr")}function plv_checkAll(c,a){if(typeof(a)=="undefined"){a=true}var b=$("#"+c);_plv_setCheckAll(b,a,true)}function plv_checkRow(d,c,b){if(typeof(b)=="undefined"){b=true}var a=$("#"+d+" .p-lv-tbody > tr");_plv_selectRow(a.eq(c),b)}function _plv_init_table(d){d.find(".p-lv-thead > tr > th").each(function(){var e=$(this);if(e.hasClass("p-lv-sortable")){e.click(function(){_plv_sort(d.attr("id"),$(this).attr("column"))});if($.browser.msie&&$.browser.majorVersion<7){e.mouseenter(function(){$(this).addClass("p-lv-hover");return false}).mouseleave(function(){$(this).removeClass("p-lv-hover");return false})}}});var b=0;var c=0;var a=d.find(".p-lv-tbody");a.click(_plv_onTBodyClick).find("input.p-lv-cb").each(function(){_plv_selectRow($(this).closest("tr"),this.checked);if(this.checked){b++}else{c++}});if($.browser.msie&&$.browser.majorVersion<7){a.mouseover(_plv_onTBodyMouseOver).mouseout(_plv_onTBodyMouseOut)}d.find(".p-lv-thead input.p-lv-ca").click(_plv_onAllCheck).prop("checked",(b>0&&c==0))}function _plv_init(a){if(a.data("plistview")){return}a.data("plistview",true);_plv_init_table(a)}function _plv_sort(d,c){var b=document.getElementById(d+"_sort");if(b){$("#"+d).loadmask();var a=document.getElementById(d+"_dir");if(c==b.value){a.value=(a.value.toLowerCase()=="asc"?"desc":"asc")}else{b.value=c;a.value="asc"}document.getElementById(d+"_submit").click()}}function _plv_goto(d,b){$("#"+d).loadmask();document.getElementById(d+"_form").reset();document.getElementById(d+"_start").value=b;var c=document.getElementById(d+"_sort");if(c&&c.value==""){c.disabled=true}var a=document.getElementById(d+"_dir");if(a&&a.value==""){a.disabled=true}document.getElementById(d+"_submit").click();return false}function _plv_limit(b,a){$("#"+b).loadmask();document.getElementById(b+"_limit").value=a;document.getElementById(b+"_submit").click()}function _plv_selectRow(a,b){if(b){a.addClass("p-selected p-lv-selected").find("input.p-lv-cb").prop("checked",b)}else{a.removeClass("p-selected p-lv-selected").find("input.p-lv-cb").prop("checked",b)}}function _plv_toggleRow(c,b){var d=c.closest("div.p-lv");if(d.data("singleSelect")){if(c.hasClass("p-lv-selected")){if(b||!d.data("untoggleSelect")){_plv_selectRow(c,false)}}else{_plv_selectRow(d.find("tr.p-lv-selected"),false);_plv_selectRow(c,true)}}else{if(c.hasClass("p-lv-selected")){_plv_selectRow(c,false)}else{_plv_selectRow(c,true)}}var a=true;d.find(".p-lv-tbody input.p-lv-cb").each(function(){if(!this.checked){a=false;return false}});_plv_setCheckAll(d,a)}function _plv_setCheckAll(c,a,b){c.find(".p-lv-thead input.p-lv-ca").each(function(){this.checked=a;this.title=$(this).data(a?"selectNone":"selectAll")});c.find(".p-lv-cab").each(function(){var d=$(this);d.prop("checked",a).find("i").removeClass(d.data(a?"iconSelectAll":"iconSelectNone")).addClass(d.data(a?"iconSelectNone":"iconSelectAll")).get(0).nextSibling.data=" "+d.data(a?"textSelectNone":"textSelectAll")});if(b){c.find(".p-lv-tbody > tr").each(function(){_plv_selectRow($(this),a)})}}function _plv_onAllCheck(){var b=this.checked;var a=$(this).closest(".p-lv");_plv_setCheckAll(a,b,true)}function _plv_onAllClick(a){var d=!($(a).prop("checked")||false);var b=$(a).closest(".p-lv");_plv_setCheckAll(b,d,true)}function _plv_onTBodyClick(a){var e=$(a.target);if(e.prop("tagName")=="A"){return}var c=e.closest("tr");if(e.hasClass("p-lv-cb")){a.stopPropagation();_plv_toggleRow(c,true);return}if(c.size()>0){_plv_toggleRow(c);var d=c.closest("div.p-lv");var b=d.get(0).onrowclick||d.data("onrowclick");panda_call(b,c.get(0))}}function _plv_onTBodyMouseOver(a){$(a.target).closest("tr.p-lv-tr").addClass("ui-state-hover p-lv-hover");return false}function _plv_onTBodyMouseOut(a){$(a.target).closest("tr.p-lv-tr").removeClass("ui-state-hover p-lv-hover");return false}(function(a){a(window).on("load",function(){a("div.p-lv").each(function(){_plv_init(a(this))})})})(jQuery);if(typeof(panda)=="undefined"){panda={}}panda.meta_props=function(){var a={};$("meta").each(function(){var d=$(this);var b=d.attr("property");if(b&&b.startsWith("s:")){var c=d.attr("content");a[b.substring(2)]=c}});return a};(function(a){a(window).on("load",function(){a(".navbar-toggle").click(function(){a(this).toggleClass("active")})})})(jQuery);(function(a){a(window).on("load",function(){for(var b in window){if(b.startsWith("onPageLoad")&&typeof(window[b])=="function"){window[b]();window[b]=null}}})})(jQuery);(function(){function _click(evt){var $el=$(this);if($el.parent().hasClass("disabled")){evt.preventDefault()}else{var pn=$el.attr("pageno");if(pn>=0){var $pg=$el.closest(".p-pager");var js=$pg.data("click");if(js){js=js.replace("$",pn);js=js.replace("#",(pn-1)*$pg.data("limit"));if(eval(js)===false){evt.preventDefault()}}}}}function _setActivePage($p,n){var $u=$p.find("ul.pagination");$u.find("li.active").removeClass("active");var $n=$u.find("li.p-pager-page");var m=$p.data("pages");var b=n-Math.floor($n.size()/2);if(b+$n.size()>m){b=m-$n.size()+1}if(b<1){b=1}var s=$p.data("style");if(n>1){$u.find(".p-pager-first, .p-pager-prev").removeClass("hidden disabled");$u.find(".p-pager-prev>a").attr("pageno",n-1)}else{$u.find(".p-pager-first").addClass(s.contains("F")?"disabled":"hidden");$u.find(".p-pager-prev").addClass(s.contains("P")?"disabled":"hidden")}$u.find(".p-pager-ellipsis-left")[b>1?"removeClass":"addClass"]("hidden");$n.each(function(){var $a=$(this).find("a");$a.attr("pageno",b).text(b);if(b==n){$(this).addClass("active")}b++});$u.find(".p-pager-ellipsis-right")[b<=m?"removeClass":"addClass"]("hidden");if(n<m){$u.find(".p-pager-next, .p-pager-last").removeClass("hidden disabled");$u.find(".p-pager-next>a").attr("pageno",n+1)}else{$u.find(".p-pager-next").addClass(s.contains("N")?"disabled":"hidden");$u.find(".p-pager-last").addClass(s.contains("L")?"disabled":"hidden")}}$.fn.ppager=function(api,pno){if(api=="getActivePage"){return this.find("ul.pagination>li.active>a").attr("pageno")}if(api=="setActivePage"){return this.each(function(){_setActivePage($(this),pno)})}return this.each(function(){var $p=$(this);if($p.attr("ppager")!="true"){$p.attr("ppager","true");if($p.data("click")){$p.find("a[pageno]").click(_click)}}})};$(window).on("load",function(){$('[data-spy="ppager"]').ppager()})})();(function(){function a(b,d){var c=this.scrollLeft;this.scrollLeft-=(d*40);if(c!=this.scrollLeft){b.preventDefault()}}$(window).on("load",function(){$(".p-panel-hscroll .panel-body").each(function(){var b=$(this);if(b.data("pwheelpanel")){return}b.data("pwheelpanel",true).mousewheel(a)})})})();(function(f){function h(i){if(i.data("pqueryer")){return}i.data("pqueryer",true);g(i)}function g(i){i.find(".p-qr-filters").find(".form-group").each(function(){if(f(this).hasClass("p-hidden")){f(this).find("input,select,textarea").prop("disabled",true)}}).end().find(".p-qr-remove").click(b).end().find(".p-qr-clear").click(e).end().find(".p-qr-select").change(c).end().find(".p-qr-f-number-c, .p-qr-f-date-c, .p-qr-f-datetime-c, .p-qr-f-time-c").on("change",a).end().find("form").submit(function(){i.loadmask()})}function d(){switch(this.tagName){case"INPUT":switch(this.type){case"radio":if(this.name!="m"&&!this.name.endsWith(".m")){this.checked=false}break;case"checkbox":this.checked=false;break;case"text":this.value="";break}break;case"SELECT":if(!this.name.endsWith(".c")){this.selectedIndex=0}break;case"TEXTAREA":this.value="";break}}function a(){var i=f(this);if(i.val()=="bt"){i.nextAll().removeClass("p-hidden").find("INPUT").prop("disabled",false)}else{i.nextAll().addClass("p-hidden").find("INPUT").prop("disabled",true)}}function c(){var i=this;if(i.selectedIndex>0){f(i).closest(".p-qr-filters").find(".p-qr-fsi-"+i.value).removeClass("p-hidden").find("input,select,textarea").prop("disabled",false).end().end().fieldset("expand");i.options[i.selectedIndex].disabled=true;i.selectedIndex=0}return false}function b(){var i=f(this).closest(".form-group");i.addClass("p-hidden").find("input,select,textarea").prop("disabled",true).each(d).end().find(".p-label-error").removeClass("p-label-error").end().find(".p-field-errors").remove().end().closest(".p-qr-filters").find(".p-qr-select > option[value="+i.data("item")+"]").prop("disabled",false)}function e(){f(this).closest(".p-qr-form").find(".p-field-errors").remove().end().find(".p-label-error").removeClass("p-label-error").end().find("input,select,textarea").each(d);return false}f(window).on("load",function(){f("div.p-qr").each(function(){h(f(this))})})})(jQuery);(function(a){a(window).on("load",function(){var c=a(".p-totop");if(c.size()>0){c.click(function(){a("html,body").animate({scrollTop:0},"slow")});var b=a(window);b.scroll(function(){c[b.scrollTop()>b.height()?"show":"hide"]()})}})})(jQuery);(function(a){a.fn.ptrigger=function(b){b=a.extend({icon:"fa fa-remove"},b);return this.each(function(){var g=a(this);if(g.data("ptriggerHooked")){return}g.data("ptriggerHooked",true);var d=b.onclick||g.data("ptrigger");if(!d||d=="false"){return}var c=b.icon||g.data("ptrigger-icon");var e=a('<i class="p-trigger '+c+'"></i>');g.addClass("p-has-trigger");e.insertAfter(g).click(function(){if(d&&d!="true"&&d!=true){panda_call(d,g.get(0))}else{if(g.val()!=""){g.val("").trigger("change")}}})})};a(window).on("load",function(){a("[data-ptrigger]").ptrigger()})})(jQuery);(function(b){var a=function(){var d=document.createElement("div");return(("draggable" in d)||("ondragstart" in d&&"ondrop" in d))&&"FormData" in window&&"FileReader" in window}();var c=function(y){if(y.data("puploader")){return}y.data("puploader",true);var g=false;var m=0;var v=y.children(".p-uploader-file");var x=y.children(".p-uploader-btn");var l=y.children(".p-uploader-sep");var w=y.children(".p-uploader-error");var q=b('<div class="p-uploader-progress progress progress-striped" style="display: none"><div class="progress-bar progress-bar-info" style="width: 0%"></div></div>');q.insertAfter(x.length>0?x:v);if(w.length<1){w=b('<div class="p-uploader-error"></div>').insertAfter(q)}if(l.length<1){l=b('<div class="p-uploader-sep"></div>').insertAfter(w)}function u(C){var D=String.formatSize(C);if(D.length>0){D="("+D+")"}return D}function B(F){var D=F.lastIndexOf("/");var C=F.lastIndexOf("\\");var E=D>C?D:C;return F.substr(E+1)}function s(J){var D=J.name,L=B(J.name),S=J.size,N=J.type;var P=y.data("dnloadLink");var M=y.data("dnloadName");var R=JSON.sparse(y.data("dnloadData"));var E=b("<div>").addClass("p-uploader-item").insertAfter(l);var I=b("<input>").attr("type","hidden").attr("name",y.data("name")).addClass("p-uploader-fid").appendTo(E);var Q=b("<span>").addClass("p-uploader-text").appendTo(E);var H=b("<div>").addClass("p-uploader-image").appendTo(E);I.val(D||"");L=L||D||v.val();var F=null;if(P&&D){var O=b.extend({},R);O[M]=D;F=P+"?"+b.param(O)}var T=String.startsWith(N,"image/");if(L){var K='<i class="fa fa-'+(T?"image":"paperclip")+' p-uploader-icon"></i> '+L+" "+u(S);if(F){b("<a>").attr("href",F).html(K).appendTo(Q)}else{b("<span>").html(K).appendTo(Q)}}b("<i>").addClass("p-uploader-remove fa fa-remove").click(p).appendTo(Q);if(T&&F){var G=b("<a>").attr("href",F);var C=b("<img>").addClass("img-thumbnail").attr("src",F).appendTo(G);G.appendTo(H).fadeIn()}}function t(C){q.children(".progress-bar").css({width:C+"%"})}function p(){b(this).closest(".p-uploader-item").fadeOut(function(){b(this).remove()});w.empty()}function r(){g=true;m=0;(x.length?x:v).addClass("p-hidden");w.empty();t(0);q.show()}function o(){t(m++);if(m<90){setTimeout(o,20)}}function A(D){if(D.lengthComputable){var C=Math.round(D.loaded*100/D.total);t(C)}}function k(){t(100);q.hide();v.val("");(x.length?x:v).removeClass("p-hidden");g=false}function f(D){var C=y.data("onUploaded");if(typeof(window[C])=="function"){return window[C](D)}return false}function e(E){k();w.palert("actionAlert",E);if(E.success){if(f(E)){return}if(!v.attr("multiple")){y.children(".p-uploader-item").remove()}var D=E.result;if(b.isArray(D)){for(var C=0;C<D.length;C++){s(D[C])}}else{s(D)}}}function i(E,C,D){k();w.palert("error",(D?(D+""):(E?E.responseText:C)))}function h(){if(g||v.val()==""){return}if(a&&v[0].files){j(v[0].files)}else{z()}}function d(C){C.preventDefault();if(g){return}j(C.originalEvent.dataTransfer.files)}function z(){r();o();var C={};C[y.data("uploadName")]=v;b.ajaf({url:y.data("uploadLink"),data:JSON.sparse(y.data("uploadData")),file:C,dataType:"json",success:e,error:i})}function j(F){r();var E=new FormData();var C=JSON.sparse(y.data("uploadData"));if(C){for(var D in C){E.append(D,C[D])}}if(F){b.each(F,function(G,H){E.append(y.data("uploadName"),H)})}b.ajax({url:y.data("uploadLink"),type:"POST",data:E,dataType:"json",cache:false,contentType:false,processData:false,xhr:function(){var G=b.ajaxSettings.xhr();G.upload.addEventListener("progress",A);return G},success:e,error:i})}v.change(function(){setTimeout(h,10)});x.click(function(C){C.preventDefault();v.trigger("click");return false});if(a){y.addClass("p-uploader-draggable").on("drag dragstart dragend dragover dragenter dragleave drop",function(C){C.preventDefault();C.stopPropagation()}).on("dragover dragenter",function(){y.addClass("p-uploader-dragover")}).on("dragleave dragend drop",function(){y.removeClass("p-uploader-dragover")}).on("drop",d)}};b.fn.puploader=function(d){return this.each(function(){c(b(this))})};b(window).on("load",function(){b('[data-spy="puploader"]').puploader()})})(jQuery);(function(a){a(window).on("load",function(){a(".p-viewfield").prev("input").change(function(){var b=a(this).val();a(this).next(".p-viewfield").text(b==""?"\u3000":b)});a('.p-viewfield[data-format="html"]').each(function(){a('<a href="#" class="p-vf-code"><i class="fa fa-code"></i></a>').appendTo(a(this).parent())});a(".p-vf-code").click(function(){var d=a(this);var c=d.toggleClass("active").parent();var b=c.find("input").val();c.find(".p-viewfield").html(d.hasClass("active")?b.escapeHtml():b);return false})})})(jQuery);