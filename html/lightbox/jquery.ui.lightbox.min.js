(function(a){a.lightbox={bindEvent:"click",overlayBgColor:"#000",overlayOpacity:0.8,fixedNavigation:false,loopNavigation:false,textBtnPrev:"&lsaquo;",textBtnNext:"&rsaquo;",textBtnClose:"&times;",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",};a.fn.lightbox=function(f){f=a.extend({},a.lightbox,f);var b=this;function h(){g(this,b);return false}function g(t,q){a("body").addClass("lightbox-open");a("embed, object, select").css({visibility:"hidden"});m();f.images=[];f.active=0;for(var r=0;r<q.length;r++){var s=q[r];if(s.tagName=="A"){f.images.push([s.getAttribute("href"),s.getAttribute("title")])}else{if(s.tagName=="IMG"){f.images.push([s.getAttribute("src"),s.getAttribute("alt")])}}if(s==t){f.active=r}}l()}function m(){a("body").append('<div id="lightbox-overlay"></div><div id="lightbox-lightbox"><div id="lightbox-imagebox"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-btn-prev"><span id="lightbox-txt-prev">'+f.textBtnPrev+'</span></a><a href="#" id="lightbox-btn-next"><span id="lightbox-txt-next">'+f.textBtnNext+'</span></a></div><a href="#" id="lightbox-loading"></a></div><div id="lightbox-statusbox"><div id="lightbox-image-caption"></div><div id="lightbox-image-number"></div><a href="#" id="lightbox-btn-close">'+f.textBtnClose+"</a></div></div>");a("#lightbox-overlay").css({backgroundColor:f.overlayBgColor,opacity:f.overlayOpacity,}).fadeIn();n();a("#lightbox-overlay, #lightbox-lightbox").click(e);a("#lightbox-loading, #lightbox-btn-close").click(e);a("#lightbox-btn-prev").click(p);a("#lightbox-btn-next").click(d);a(window).bind("resize",n);a(document).keydown(o)}function n(){a("#lightbox-imagebox").css("line-height",(a("#lightbox-imagebox").innerHeight()-2)+"px")}function p(){if(f.images.length<1){return true}if(f.active>0){f.active--;l();return false}if(f.loopNavigation){f.active=f.images.length-1;l();return false}}function d(){if(f.images.length<1){return true}if(f.active<f.images.length-1){f.active++;l();return false}if(f.loopNavigation){f.active=0;l();return false}}function l(){a("#lightbox-loading").show();a("#lightbox-image, #lightbox-statusbox").hide();a("#lightbox-nav")[f.fixedNavigation?"addClass":"removeClass"]("lightbox-fixed");var q=new Image();q.onload=function(){a("#lightbox-image").attr("src",f.images[f.active][0]);i();q.onload=function(){}};q.src=f.images[f.active][0]}function i(){a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(function(){c();k()});j()}function c(){if(f.images.length>0){a("#lightbox-image-caption").html(f.images[f.active][1]);a("#lightbox-image-number").html(f.txtImage+" "+(f.active+1)+" "+f.txtOf+" "+f.images.length)}a("#lightbox-statusbox").slideDown("fast")}function k(){a("#lightbox-btn-prev")[((f.loopNavigation&&f.images.length>1)||f.active>0)?"addClass":"removeClass"]("lightbox-has-prev");a("#lightbox-btn-next")[((f.loopNavigation&&f.images.length>1)||f.active<f.images.length-1)?"addClass":"removeClass"]("lightbox-has-next")}function o(s){s=s||event;var q=s.keyCode;var r=s.DOM_VK_ESCAPE||27;key=String.fromCharCode(q).toLowerCase();if((key==f.keyToClose)||(key=="x")||(q==r)){return e()}if((key==f.keyToPrev)||(q==37)){return p()}if((key==f.keyToNext)||(q==39)){return d()}}function j(){if(f.images.length){var q=f.active-1;(new Image()).src=f.images[q<0?f.images.length-1:q][0];q=f.active+1;(new Image()).src=f.images[q>=f.images.length?0:q][0]}}function e(){a(document).unbind("keydown",o);a(window).unbind("resize",n);a("#lightbox-lightbox").remove();a("#lightbox-overlay").fadeOut(function(){a("#lightbox-overlay").remove()});a("embed, object, select").css({visibility:"visible"});a("body").removeClass("lightbox-open");return false}return this.unbind(f.bindEvent).bind(f.bindEvent,h)}})(jQuery);